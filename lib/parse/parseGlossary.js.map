{"version":3,"sources":["../../src/parse/parseGlossary.js"],"names":["lookupStructureFile","require","glossaryFromDocument","parseGlossary","book","logger","fs","getContentFS","then","file","debug","ln","path","parse","document","glossary","setFile","set","module","exports"],"mappings":";;AAAA,IAAMA,sBAAsBC,QAAQ,uBAAR,CAA5B;AACA,IAAMC,uBAAuBD,QAAQ,wBAAR,CAA7B;;AAEA;;;;;;AAMA,SAASE,aAAT,CAAuBC,IAAvB,EAA6B;AAAA,QACjBC,MADiB,GACND,IADM,CACjBC,MADiB;;AAEzB,QAAMC,KAAKF,KAAKG,YAAL,EAAX;;AAEA,WAAOP,oBAAoBI,IAApB,EAA0B,UAA1B,EACNI,IADM,CACD,UAACC,IAAD,EAAU;AACZ,YAAI,CAACA,IAAL,EAAW;AACPJ,mBAAOK,KAAP,CAAaC,EAAb,CAAgB,qBAAhB;AACA,mBAAOP,IAAP;AACH;;AAEDC,eAAOK,KAAP,CAAaC,EAAb,wBAAqCF,KAAKG,IAA1C;AACA,eAAOH,KAAKI,KAAL,CAAWP,EAAX,EACNE,IADM,CACD,UAACM,QAAD,EAAc;AAChB,gBAAIC,WAAWb,qBAAqBY,QAArB,CAAf;AACAC,uBAAWA,SAASC,OAAT,CAAiBP,IAAjB,CAAX;AACA,mBAAOL,KAAKa,GAAL,CAAS,UAAT,EAAqBF,QAArB,CAAP;AACH,SALM,CAAP;AAMH,KAdM,CAAP;AAeH;;AAEDG,OAAOC,OAAP,GAAiBhB,aAAjB","file":"parseGlossary.js","sourcesContent":["const lookupStructureFile = require('./lookupStructureFile');\nconst glossaryFromDocument = require('./glossaryFromDocument');\n\n/**\n * Parse glossary.\n *\n * @param {Book} book\n * @return {Promise<Book>}\n */\nfunction parseGlossary(book) {\n    const { logger } = book;\n    const fs = book.getContentFS();\n\n    return lookupStructureFile(book, 'glossary')\n    .then((file) => {\n        if (!file) {\n            logger.debug.ln('no glossary located');\n            return book;\n        }\n\n        logger.debug.ln(`glossary found at ${file.path}`);\n        return file.parse(fs)\n        .then((document) => {\n            let glossary = glossaryFromDocument(document);\n            glossary = glossary.setFile(file);\n            return book.set('glossary', glossary);\n        });\n    });\n}\n\nmodule.exports = parseGlossary;\n"]}