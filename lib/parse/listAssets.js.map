{"version":3,"sources":["../../src/parse/listAssets.js"],"names":["timing","require","listAssets","book","pages","fs","getContentFS","summary","getSummary","summaryFile","getFile","getPath","glossary","getGlossary","glossaryFile","langs","getLanguages","langsFile","config","getConfig","configFile","filterFile","file","isContentFileIgnored","has","measure","listAllFiles","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,iBAAR,CAAf;;AAEA;;;;;;;;AAQA,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,KAA1B,EAAiC;AAC7B,QAAMC,KAAKF,KAAKG,YAAL,EAAX;;AAEA,QAAMC,UAAUJ,KAAKK,UAAL,EAAhB;AACA,QAAMC,cAAcF,QAAQG,OAAR,GAAkBC,OAAlB,EAApB;;AAEA,QAAMC,WAAWT,KAAKU,WAAL,EAAjB;AACA,QAAMC,eAAeF,SAASF,OAAT,GAAmBC,OAAnB,EAArB;;AAEA,QAAMI,QAAQZ,KAAKa,YAAL,EAAd;AACA,QAAMC,YAAYF,MAAML,OAAN,GAAgBC,OAAhB,EAAlB;;AAEA,QAAMO,SAASf,KAAKgB,SAAL,EAAf;AACA,QAAMC,aAAaF,OAAOR,OAAP,GAAiBC,OAAjB,EAAnB;;AAEA,aAASU,UAAT,CAAoBC,IAApB,EAA0B;AACtB,eAAO,EACHA,SAASb,WAAT,IACAa,SAASR,YADT,IAEAQ,SAASL,SAFT,IAGAK,SAASF,UAHT,IAIAjB,KAAKoB,oBAAL,CAA0BD,IAA1B,CAJA,IAKAlB,MAAMoB,GAAN,CAAUF,IAAV,CANG,CAAP;AAQH;;AAED,WAAOtB,OAAOyB,OAAP,CACH,kBADG,EAEHpB,GAAGqB,YAAH,CAAgB,GAAhB,EAAqBL,UAArB,CAFG,CAAP;AAIH;;AAEDM,OAAOC,OAAP,GAAiB1B,UAAjB","file":"listAssets.js","sourcesContent":["const timing = require('../utils/timing');\n\n/**\n * List all assets in a book\n * Assets are file not ignored and not a page\n *\n * @param {Book} book\n * @param {List<String>} pages\n * @return {Promise<List<String>>} assets\n */\nfunction listAssets(book, pages) {\n    const fs = book.getContentFS();\n\n    const summary = book.getSummary();\n    const summaryFile = summary.getFile().getPath();\n\n    const glossary = book.getGlossary();\n    const glossaryFile = glossary.getFile().getPath();\n\n    const langs = book.getLanguages();\n    const langsFile = langs.getFile().getPath();\n\n    const config = book.getConfig();\n    const configFile = config.getFile().getPath();\n\n    function filterFile(file) {\n        return !(\n            file === summaryFile ||\n            file === glossaryFile ||\n            file === langsFile ||\n            file === configFile ||\n            book.isContentFileIgnored(file) ||\n            pages.has(file)\n        );\n    }\n\n    return timing.measure(\n        'parse.listAssets',\n        fs.listAllFiles('.', filterFile)\n    );\n}\n\nmodule.exports = listAssets;\n"]}