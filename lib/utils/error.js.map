{"version":3,"sources":["../../src/utils/error.js"],"names":["is","require","TypedError","WrappedError","enforce","err","string","Error","message","replace","ParsingError","type","OutputError","FileNotFoundError","filename","FileNotParsableError","FileOutOfScopeError","root","code","RequireInstallError","cmd","install","TemplateError","PluginError","plugin","ConfigurationError","EbookError","stdout","module","exports"],"mappings":";;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;;AAEA,IAAMC,aAAaD,QAAQ,aAAR,CAAnB;AACA,IAAME,eAAeF,QAAQ,eAAR,CAArB;;AAGA;AACA,SAASG,OAAT,CAAiBC,GAAjB,EAAsB;AAClB,QAAIL,GAAGM,MAAH,CAAUD,GAAV,CAAJ,EAAoBA,MAAM,IAAIE,KAAJ,CAAUF,GAAV,CAAN;AACpBA,QAAIG,OAAJ,GAAcH,IAAIG,OAAJ,CAAYC,OAAZ,CAAoB,UAApB,EAAgC,EAAhC,CAAd;;AAEA,WAAOJ,GAAP;AACH;;AAED;AACA,IAAMK,eAAeP,aAAa;AAC9BK,aAAS,8BADqB;AAE9BG,UAAM;AAFwB,CAAb,CAArB;AAIA,IAAMC,cAAcT,aAAa;AAC7BK,aAAS,6BADoB;AAE7BG,UAAM;AAFuB,CAAb,CAApB;;AAKA;AACA,IAAME,oBAAoBX,WAAW;AACjCS,UAAM,gBAD2B;AAEjCH,aAAS,sCAFwB;AAGjCM,cAAU;AAHuB,CAAX,CAA1B;;AAMA;AACA,IAAMC,uBAAuBb,WAAW;AACpCS,UAAM,mBAD8B;AAEpCH,aAAS,oCAF2B;AAGpCM,cAAU;AAH0B,CAAX,CAA7B;;AAMA;AACA,IAAME,sBAAsBd,WAAW;AACnCS,UAAM,mBAD6B;AAEnCH,aAAS,8BAF0B;AAGnCM,cAAU,IAHyB;AAInCG,UAAM,IAJ6B;AAKnCC,UAAM;AAL6B,CAAX,CAA5B;;AAQA;AACA,IAAMC,sBAAsBjB,WAAW;AACnCS,UAAM,kBAD6B;AAEnCH,aAAS,sCAF0B;AAGnCY,SAAK,IAH8B;AAInCF,UAAM,QAJ6B;AAKnCG,aAAS;AAL0B,CAAX,CAA5B;;AAQA;AACA,IAAMC,gBAAgBnB,aAAa;AAC/BK,aAAS,sDADsB;AAE/BG,UAAM,UAFyB;AAG/BG,cAAU;AAHqB,CAAb,CAAtB;;AAMA;AACA,IAAMS,cAAcpB,aAAa;AAC7BK,aAAS,6CADoB;AAE7BG,UAAM,QAFuB;AAG7Ba,YAAQ;AAHqB,CAAb,CAApB;;AAMA;AACA,IAAMC,qBAAqBtB,aAAa;AACpCK,aAAS,iDAD2B;AAEpCG,UAAM;AAF8B,CAAb,CAA3B;;AAKA;AACA,IAAMe,aAAavB,aAAa;AAC5BK,aAAS,wDADmB;AAE5BG,UAAM,OAFsB;AAG5BgB,YAAQ;AAHoB,CAAb,CAAnB;;AAMAC,OAAOC,OAAP,GAAiB;AACbzB,oBADa;;AAGbM,8BAHa;AAIbE,4BAJa;AAKbO,4CALa;;AAObJ,8CAPa;AAQbF,wCARa;AASbG,4CATa;;AAWbM,gCAXa;AAYbC,4BAZa;AAabE,0CAba;AAcbC;AAda,CAAjB","file":"error.js","sourcesContent":["const is = require('is');\n\nconst TypedError = require('error/typed');\nconst WrappedError = require('error/wrapped');\n\n\n// Enforce as an Error object, and cleanup message\nfunction enforce(err) {\n    if (is.string(err)) err = new Error(err);\n    err.message = err.message.replace(/^Error: /, '');\n\n    return err;\n}\n\n// Random error wrappers during parsing/generation\nconst ParsingError = WrappedError({\n    message: 'Parsing Error: {origMessage}',\n    type: 'parse'\n});\nconst OutputError = WrappedError({\n    message: 'Output Error: {origMessage}',\n    type: 'generate'\n});\n\n// A file does not exists\nconst FileNotFoundError = TypedError({\n    type: 'file.not-found',\n    message: 'No \"{filename}\" file (or is ignored)',\n    filename: null\n});\n\n// A file cannot be parsed\nconst FileNotParsableError = TypedError({\n    type: 'file.not-parsable',\n    message: '\"{filename}\" file cannot be parsed',\n    filename: null\n});\n\n// A file is outside the scope\nconst FileOutOfScopeError = TypedError({\n    type: 'file.out-of-scope',\n    message: '\"{filename}\" not in \"{root}\"',\n    filename: null,\n    root: null,\n    code: 'EACCESS'\n});\n\n// A file is outside the scope\nconst RequireInstallError = TypedError({\n    type: 'install.required',\n    message: '\"{cmd}\" is not installed.\\n{install}',\n    cmd: null,\n    code: 'ENOENT',\n    install: ''\n});\n\n// Error for nunjucks templates\nconst TemplateError = WrappedError({\n    message: 'Error compiling template \"{filename}\": {origMessage}',\n    type: 'template',\n    filename: null\n});\n\n// Error for nunjucks templates\nconst PluginError = WrappedError({\n    message: 'Error with plugin \"{plugin}\": {origMessage}',\n    type: 'plugin',\n    plugin: null\n});\n\n// Error with the book's configuration\nconst ConfigurationError = WrappedError({\n    message: 'Error with book\\'s configuration: {origMessage}',\n    type: 'configuration'\n});\n\n// Error during ebook generation\nconst EbookError = WrappedError({\n    message: 'Error during ebook generation: {origMessage}\\n{stdout}',\n    type: 'ebook',\n    stdout: ''\n});\n\nmodule.exports = {\n    enforce,\n\n    ParsingError,\n    OutputError,\n    RequireInstallError,\n\n    FileNotParsableError,\n    FileNotFoundError,\n    FileOutOfScopeError,\n\n    TemplateError,\n    PluginError,\n    ConfigurationError,\n    EbookError\n};\n"]}