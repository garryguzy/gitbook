{"version":3,"sources":["../../src/json/encodePage.js"],"names":["encodeSummaryArticle","require","encodePage","page","summary","urls","file","getFile","attributes","getAttributes","article","getByPath","getPath","result","content","getContent","dir","getDir","toJS","title","getTitle","level","getLevel","depth","getDepth","nextArticle","getNextArticle","next","prevArticle","getPrevArticle","previous","module","exports"],"mappings":";;AAAA,IAAMA,uBAAuBC,QAAQ,wBAAR,CAA7B;;AAEA;;;;;;;;AAQA,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,OAA1B,EAAmCC,IAAnC,EAAyC;AACrC,QAAMC,OAAOH,KAAKI,OAAL,EAAb;AACA,QAAMC,aAAaL,KAAKM,aAAL,EAAnB;AACA,QAAMC,UAAUN,QAAQO,SAAR,CAAkBL,KAAKM,OAAL,EAAlB,CAAhB;;AAEA,QAAMC,SAAS;AACXC,iBAAYX,KAAKY,UAAL,EADD;AAEXC,aAAYb,KAAKc,MAAL,EAFD;AAGXT,oBAAYA,WAAWU,IAAX;AAHD,KAAf;;AAMA,QAAIR,OAAJ,EAAa;AACTG,eAAOM,KAAP,GAAeT,QAAQU,QAAR,EAAf;AACAP,eAAOQ,KAAP,GAAeX,QAAQY,QAAR,EAAf;AACAT,eAAOU,KAAP,GAAeb,QAAQc,QAAR,EAAf;;AAEA,YAAMC,cAAcrB,QAAQsB,cAAR,CAAuBhB,OAAvB,CAApB;AACA,YAAIe,WAAJ,EAAiB;AACbZ,mBAAOc,IAAP,GAAc3B,qBAAqByB,WAArB,EAAkCpB,IAAlC,EAAwC,KAAxC,CAAd;AACH;;AAED,YAAMuB,cAAcxB,QAAQyB,cAAR,CAAuBnB,OAAvB,CAApB;AACA,YAAIkB,WAAJ,EAAiB;AACbf,mBAAOiB,QAAP,GAAkB9B,qBAAqB4B,WAArB,EAAkCvB,IAAlC,EAAwC,KAAxC,CAAlB;AACH;AACJ;;AAED,WAAOQ,MAAP;AACH;;AAEDkB,OAAOC,OAAP,GAAiB9B,UAAjB","file":"encodePage.js","sourcesContent":["const encodeSummaryArticle = require('./encodeSummaryArticle');\n\n/**\n * Return a JSON representation of a page.\n *\n * @param  {Page} page\n * @param  {Summary} summary\n * @param  {URIIndex} urls\n * @return {JSON} json\n */\nfunction encodePage(page, summary, urls) {\n    const file = page.getFile();\n    const attributes = page.getAttributes();\n    const article = summary.getByPath(file.getPath());\n\n    const result = {\n        content:    page.getContent(),\n        dir:        page.getDir(),\n        attributes: attributes.toJS()\n    };\n\n    if (article) {\n        result.title = article.getTitle();\n        result.level = article.getLevel();\n        result.depth = article.getDepth();\n\n        const nextArticle = summary.getNextArticle(article);\n        if (nextArticle) {\n            result.next = encodeSummaryArticle(nextArticle, urls, false);\n        }\n\n        const prevArticle = summary.getPrevArticle(article);\n        if (prevArticle) {\n            result.previous = encodeSummaryArticle(prevArticle, urls, false);\n        }\n    }\n\n    return result;\n}\n\nmodule.exports = encodePage;\n"]}