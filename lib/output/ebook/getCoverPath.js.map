{"version":3,"sources":["../../../src/output/ebook/getCoverPath.js"],"names":["path","require","fs","getCoverPath","output","outputRoot","getRoot","book","getBook","config","getConfig","coverName","getValue","cover","pickFile","isLanguageBook","join","module","exports"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,KAAKD,QAAQ,gBAAR,CAAX;;AAEA;;;;;;AAMA,SAASE,YAAT,CAAsBC,MAAtB,EAA8B;AAC1B,QAAMC,aAAaD,OAAOE,OAAP,EAAnB;AACA,QAAMC,OAAOH,OAAOI,OAAP,EAAb;AACA,QAAMC,SAASF,KAAKG,SAAL,EAAf;AACA,QAAMC,YAAYF,OAAOG,QAAP,CAAgB,OAAhB,EAAyB,WAAzB,CAAlB;;AAEA;AACA,QAAIC,QAAQX,GAAGY,QAAH,CAAYT,UAAZ,EAAwBM,SAAxB,CAAZ;AACA,QAAIE,KAAJ,EAAW;AACP,eAAOA,KAAP;AACH;;AAED;AACA,QAAIN,KAAKQ,cAAL,EAAJ,EAA2B;AACvBF,gBAAQX,GAAGY,QAAH,CAAYd,KAAKgB,IAAL,CAAUX,UAAV,EAAsB,IAAtB,CAAZ,EAAyCM,SAAzC,CAAR;AACH;;AAED,WAAOE,KAAP;AACH;;AAEDI,OAAOC,OAAP,GAAiBf,YAAjB","file":"getCoverPath.js","sourcesContent":["const path = require('path');\nconst fs = require('../../utils/fs');\n\n/**\n    Resolve path to cover file to use\n\n    @param {Output}\n    @return {String}\n*/\nfunction getCoverPath(output) {\n    const outputRoot = output.getRoot();\n    const book = output.getBook();\n    const config = book.getConfig();\n    const coverName = config.getValue('cover', 'cover.jpg');\n\n    // Resolve to absolute\n    let cover = fs.pickFile(outputRoot, coverName);\n    if (cover) {\n        return cover;\n    }\n\n    // Multilingual? try parent folder\n    if (book.isLanguageBook()) {\n        cover = fs.pickFile(path.join(outputRoot, '..'), coverName);\n    }\n\n    return cover;\n}\n\nmodule.exports = getCoverPath;\n"]}