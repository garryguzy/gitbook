{"version":3,"sources":["../../../src/output/ebook/getPDFTemplate.js"],"names":["juice","require","JSONUtils","render","Promise","getPDFTemplate","output","type","outputRoot","getRoot","plugins","getPlugins","initialState","encodeState","page","num","title","html","nfcall","juiceResources","webResources","relativeTo","module","exports"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;;AAEA,IAAMC,YAAYD,QAAQ,YAAR,CAAlB;AACA,IAAME,SAASF,QAAQ,sBAAR,CAAf;AACA,IAAMG,UAAUH,QAAQ,qBAAR,CAAhB;;AAEA;;;;;;;AAOA,SAASI,cAAT,CAAwBC,MAAxB,EAAgCC,IAAhC,EAAsC;AAClC,QAAMC,aAAaF,OAAOG,OAAP,EAAnB;AACA,QAAMC,UAAUJ,OAAOK,UAAP,EAAhB;;AAEA;AACA,QAAMC,eAAeV,UAAUW,WAAV,CAAsBP,MAAtB,CAArB;AACAM,iBAAaE,IAAb,GAAoB;AAChBC,aAAK,WADW;AAEhBC,eAAO;AAFS,KAApB;;AAKA;AACA,QAAMC,OAAOd,OAAOO,OAAP,EAAgBE,YAAhB,EAA8B,OAA9B,WAA8CL,IAA9C,CAAb;;AAEA;AACA,WAAOH,QAAQc,MAAR,CAAelB,MAAMmB,cAArB,EAAqCF,IAArC,EAA2C;AAC9CG,sBAAc;AACVC,wBAAYb;AADF;AADgC,KAA3C,CAAP;AAKH;;AAEDc,OAAOC,OAAP,GAAiBlB,cAAjB","file":"getPDFTemplate.js","sourcesContent":["const juice = require('juice');\n\nconst JSONUtils = require('../../json');\nconst render = require('../../browser/render');\nconst Promise = require('../../utils/promise');\n\n/**\n * Generate PDF header/footer templates\n *\n * @param {Output} output\n * @param {String} type (\"footer\" or \"header\")\n * @return {String} html\n */\nfunction getPDFTemplate(output, type) {\n    const outputRoot = output.getRoot();\n    const plugins = output.getPlugins();\n\n    // Generate initial state\n    const initialState = JSONUtils.encodeState(output);\n    initialState.page = {\n        num: '_PAGENUM_',\n        title: '_SECTION_'\n    };\n\n    // Render the theme\n    const html = render(plugins, initialState, 'ebook', `pdf:${type}`);\n\n    // Inline CSS\n    return Promise.nfcall(juice.juiceResources, html, {\n        webResources: {\n            relativeTo: outputRoot\n        }\n    });\n}\n\nmodule.exports = getPDFTemplate;\n"]}