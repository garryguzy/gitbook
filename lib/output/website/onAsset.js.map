{"version":3,"sources":["../../../src/output/website/onAsset.js"],"names":["path","require","fs","onAsset","output","asset","book","getBook","options","getOptions","bookFS","getContentFS","outputFolder","get","outputPath","resolve","ensureFile","then","readAsStream","stream","writeStream","thenResolve","module","exports"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,KAAKD,QAAQ,gBAAR,CAAX;;AAEA;;;;;;;AAOA,SAASE,OAAT,CAAiBC,MAAjB,EAAyBC,KAAzB,EAAgC;AAC5B,QAAMC,OAAUF,OAAOG,OAAP,EAAhB;AACA,QAAMC,UAAUJ,OAAOK,UAAP,EAAhB;AACA,QAAMC,SAAUJ,KAAKK,YAAL,EAAhB;;AAEA,QAAMC,eAAeJ,QAAQK,GAAR,CAAY,MAAZ,CAArB;AACA,QAAMC,aAAed,KAAKe,OAAL,CAAaH,YAAb,EAA2BP,KAA3B,CAArB;;AAEA,WAAOH,GAAGc,UAAH,CAAcF,UAAd,EACNG,IADM,CACD,YAAM;AACR,eAAOP,OAAOQ,YAAP,CAAoBb,KAApB,EACNY,IADM,CACD,UAACE,MAAD,EAAY;AACd,mBAAOjB,GAAGkB,WAAH,CAAeN,UAAf,EAA2BK,MAA3B,CAAP;AACH,SAHM,CAAP;AAIH,KANM,EAONE,WAPM,CAOMjB,MAPN,CAAP;AAQH;;AAEDkB,OAAOC,OAAP,GAAiBpB,OAAjB","file":"onAsset.js","sourcesContent":["const path = require('path');\nconst fs = require('../../utils/fs');\n\n/**\n * Copy an asset from the book to the output folder.\n *\n * @param {Output} output\n * @param {Page} page\n * @return {Output} output\n */\nfunction onAsset(output, asset) {\n    const book    = output.getBook();\n    const options = output.getOptions();\n    const bookFS  = book.getContentFS();\n\n    const outputFolder = options.get('root');\n    const outputPath   = path.resolve(outputFolder, asset);\n\n    return fs.ensureFile(outputPath)\n    .then(() => {\n        return bookFS.readAsStream(asset)\n        .then((stream) => {\n            return fs.writeStream(outputPath, stream);\n        });\n    })\n    .thenResolve(output);\n}\n\nmodule.exports = onAsset;\n"]}