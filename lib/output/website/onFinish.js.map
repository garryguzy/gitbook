{"version":3,"sources":["../../../src/output/website/onFinish.js"],"names":["JSONUtils","require","Promise","writeFile","render","onFinish","output","book","getBook","isMultilingual","plugins","getPlugins","initialState","encodeState","html","module","exports"],"mappings":";;AAAA,IAAMA,YAAYC,QAAQ,YAAR,CAAlB;AACA,IAAMC,UAAUD,QAAQ,qBAAR,CAAhB;AACA,IAAME,YAAYF,QAAQ,qBAAR,CAAlB;AACA,IAAMG,SAASH,QAAQ,sBAAR,CAAf;;AAEA;;;;;;AAMA,SAASI,QAAT,CAAkBC,MAAlB,EAA0B;AACtB,QAAMC,OAAOD,OAAOE,OAAP,EAAb;;AAEA,QAAI,CAACD,KAAKE,cAAL,EAAL,EAA4B;AACxB,eAAOP,QAAQI,MAAR,CAAP;AACH;;AAED,QAAMI,UAAUJ,OAAOK,UAAP,EAAhB;;AAEA;AACA,QAAMC,eAAeZ,UAAUa,WAAV,CAAsBP,MAAtB,CAArB;;AAEA;AACA,QAAMQ,OAAOV,OAAOM,OAAP,EAAgBE,YAAhB,EAA8B,SAA9B,EAAyC,mBAAzC,CAAb;;AAEA,WAAOT,UAAUG,MAAV,EAAkB,YAAlB,EAAgCQ,IAAhC,CAAP;AACH;;AAEDC,OAAOC,OAAP,GAAiBX,QAAjB","file":"onFinish.js","sourcesContent":["const JSONUtils = require('../../json');\nconst Promise = require('../../utils/promise');\nconst writeFile = require('../helper/writeFile');\nconst render = require('../../browser/render');\n\n/**\n * Finish the generation, write the languages index.\n *\n * @param {Output}\n * @return {Output}\n */\nfunction onFinish(output) {\n    const book = output.getBook();\n\n    if (!book.isMultilingual()) {\n        return Promise(output);\n    }\n\n    const plugins = output.getPlugins();\n\n    // Generate initial state\n    const initialState = JSONUtils.encodeState(output);\n\n    // Render using React\n    const html = render(plugins, initialState, 'browser', 'website:languages');\n\n    return writeFile(output, 'index.html', html);\n}\n\nmodule.exports = onFinish;\n"]}