{"version":3,"sources":["../../../src/output/website/onPage.js"],"names":["JSONUtils","require","Modifiers","writeFile","getModifiers","render","onPage","output","page","file","getFile","plugins","getPlugins","urls","getURLIndex","filePath","resolve","getPath","modifyHTML","then","resultPage","initialState","encodeState","html","module","exports"],"mappings":";;AAAA,IAAMA,YAAYC,QAAQ,YAAR,CAAlB;AACA,IAAMC,YAAYD,QAAQ,cAAR,CAAlB;AACA,IAAME,YAAYF,QAAQ,qBAAR,CAAlB;AACA,IAAMG,eAAeH,QAAQ,iBAAR,CAArB;AACA,IAAMI,SAASJ,QAAQ,sBAAR,CAAf;;AAEA;;;;;;AAMA,SAASK,MAAT,CAAgBC,MAAhB,EAAwBC,IAAxB,EAA8B;AAC1B,QAAMC,OAAUD,KAAKE,OAAL,EAAhB;AACA,QAAMC,UAAUJ,OAAOK,UAAP,EAAhB;AACA,QAAMC,OAAUN,OAAOO,WAAP,EAAhB;;AAEA;AACA,QAAMC,WAAWF,KAAKG,OAAL,CAAaP,KAAKQ,OAAL,EAAb,CAAjB;;AAEA,WAAOf,UAAUgB,UAAV,CAAqBV,IAArB,EAA2BJ,aAAaG,MAAb,EAAqBC,IAArB,CAA3B,EACNW,IADM,CACD,UAACC,UAAD,EAAgB;AAClB;AACA,YAAMC,eAAerB,UAAUsB,WAAV,CAAsBf,MAAtB,EAA8Ba,UAA9B,CAArB;;AAEA;AACA,YAAMG,OAAOlB,OAAOM,OAAP,EAAgBU,YAAhB,EAA8B,SAA9B,EAAyC,cAAzC,CAAb;;AAEA;AACA,eAAOlB,UAAUI,MAAV,EAAkBQ,QAAlB,EAA4BQ,IAA5B,CAAP;AACH,KAVM,CAAP;AAWH;;AAEDC,OAAOC,OAAP,GAAiBnB,MAAjB","file":"onPage.js","sourcesContent":["const JSONUtils = require('../../json');\nconst Modifiers = require('../modifiers');\nconst writeFile = require('../helper/writeFile');\nconst getModifiers = require('../getModifiers');\nconst render = require('../../browser/render');\n\n/**\n * Generate a page using react and the plugins.\n *\n * @param {Output} output\n * @param {Page} page\n */\nfunction onPage(output, page) {\n    const file    = page.getFile();\n    const plugins = output.getPlugins();\n    const urls    = output.getURLIndex();\n\n    // Output file path\n    const filePath = urls.resolve(file.getPath());\n\n    return Modifiers.modifyHTML(page, getModifiers(output, page))\n    .then((resultPage) => {\n        // Generate the context\n        const initialState = JSONUtils.encodeState(output, resultPage);\n\n        // Render the theme\n        const html = render(plugins, initialState, 'browser', 'website:body');\n\n        // Write it to the disk\n        return writeFile(output, filePath, html);\n    });\n}\n\nmodule.exports = onPage;\n"]}