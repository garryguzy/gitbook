{"version":3,"sources":["../../src/output/generatePages.js"],"names":["Promise","require","generatePage","generatePages","generator","output","pages","getPages","logger","getLogger","onPage","reduce","out","page","file","getFile","debug","ln","getPath","then","resultPage","fail","err","error","module","exports"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,kBAAR,CAAhB;AACA,IAAMC,eAAeD,QAAQ,gBAAR,CAArB;;AAEA;;;;;;;AAOA,SAASE,aAAT,CAAuBC,SAAvB,EAAkCC,MAAlC,EAA0C;AACtC,QAAMC,QAAQD,OAAOE,QAAP,EAAd;AACA,QAAMC,SAASH,OAAOI,SAAP,EAAf;;AAEA;AACA,QAAI,CAACL,UAAUM,MAAf,EAAuB;AACnB,eAAOV,QAAQK,MAAR,CAAP;AACH;;AAED,WAAOL,QAAQW,MAAR,CAAeL,KAAf,EAAsB,UAACM,GAAD,EAAMC,IAAN,EAAe;AACxC,YAAMC,OAAOD,KAAKE,OAAL,EAAb;;AAEAP,eAAOQ,KAAP,CAAaC,EAAb,CAAgB,oBAAoBH,KAAKI,OAAL,EAApB,GAAqC,GAArD;;AAEA,eAAOhB,aAAaU,GAAb,EAAkBC,IAAlB,EACNM,IADM,CACD,UAACC,UAAD,EAAgB;AAClB,mBAAOhB,UAAUM,MAAV,CAAiBE,GAAjB,EAAsBQ,UAAtB,CAAP;AACH,SAHM,EAINC,IAJM,CAID,UAACC,GAAD,EAAS;AACXd,mBAAOe,KAAP,CAAaN,EAAb,CAAgB,kCAAkCH,KAAKI,OAAL,EAAlC,GAAmD,IAAnE;AACA,kBAAMI,GAAN;AACH,SAPM,CAAP;AAQH,KAbM,EAaJjB,MAbI,CAAP;AAcH;;AAEDmB,OAAOC,OAAP,GAAiBtB,aAAjB","file":"generatePages.js","sourcesContent":["const Promise = require('../utils/promise');\nconst generatePage = require('./generatePage');\n\n/**\n    Output all pages using a generator\n\n    @param {Generator} generator\n    @param {Output} output\n    @return {Promise<Output>}\n*/\nfunction generatePages(generator, output) {\n    const pages = output.getPages();\n    const logger = output.getLogger();\n\n    // Is generator ignoring assets?\n    if (!generator.onPage) {\n        return Promise(output);\n    }\n\n    return Promise.reduce(pages, (out, page) => {\n        const file = page.getFile();\n\n        logger.debug.ln('generate page \"' + file.getPath() + '\"');\n\n        return generatePage(out, page)\n        .then((resultPage) => {\n            return generator.onPage(out, resultPage);\n        })\n        .fail((err) => {\n            logger.error.ln('error while generating page \"' + file.getPath() + '\":');\n            throw err;\n        });\n    }, output);\n}\n\nmodule.exports = generatePages;\n"]}