{"version":3,"sources":["../../../src/output/modifiers/inlineAssets.js"],"names":["svgToImg","require","svgToPng","inlinePng","resolveImages","fetchRemoteImages","Promise","inlineAssets","rootFolder","currentFile","$","then","bind","module","exports"],"mappings":";;AAAA,IAAMA,WAAWC,QAAQ,YAAR,CAAjB;AACA,IAAMC,WAAWD,QAAQ,YAAR,CAAjB;AACA,IAAME,YAAYF,QAAQ,aAAR,CAAlB;AACA,IAAMG,gBAAgBH,QAAQ,iBAAR,CAAtB;AACA,IAAMI,oBAAoBJ,QAAQ,qBAAR,CAA1B;;AAEA,IAAMK,UAAUL,QAAQ,qBAAR,CAAhB;;AAEA;;;;;AAKA,SAASM,YAAT,CAAsBC,UAAtB,EAAkCC,WAAlC,EAA+C;AAC3C,WAAO,UAASC,CAAT,EAAY;AACf,eAAOJ;;AAEP;AACA;AAHO,SAINK,IAJM,CAIDP,cAAcQ,IAAd,CAAmB,IAAnB,EAAyBH,WAAzB,EAAsCC,CAAtC,CAJC,EAKNC,IALM,CAKDN,kBAAkBO,IAAlB,CAAuB,IAAvB,EAA6BJ,UAA7B,EAAyCC,WAAzC,EAAsDC,CAAtD,CALC,EAONC,IAPM,CAODX,SAASY,IAAT,CAAc,IAAd,EAAoBJ,UAApB,EAAgCC,WAAhC,EAA6CC,CAA7C,CAPC,EAQNC,IARM,CAQDT,SAASU,IAAT,CAAc,IAAd,EAAoBJ,UAApB,EAAgCC,WAAhC,EAA6CC,CAA7C,CARC,EASNC,IATM,CASDR,UAAUS,IAAV,CAAe,IAAf,EAAqBJ,UAArB,EAAiCC,WAAjC,EAA8CC,CAA9C,CATC,CAAP;AAUH,KAXD;AAYH;;AAEDG,OAAOC,OAAP,GAAiBP,YAAjB","file":"inlineAssets.js","sourcesContent":["const svgToImg = require('./svgToImg');\nconst svgToPng = require('./svgToPng');\nconst inlinePng = require('./inlinePng');\nconst resolveImages = require('./resolveImages');\nconst fetchRemoteImages = require('./fetchRemoteImages');\n\nconst Promise = require('../../utils/promise');\n\n/**\n * Inline all assets in a page\n *\n * @param {String} rootFolder\n */\nfunction inlineAssets(rootFolder, currentFile) {\n    return function($) {\n        return Promise()\n\n        // Resolving images and fetching external images should be\n        // done before svg conversion\n        .then(resolveImages.bind(null, currentFile, $))\n        .then(fetchRemoteImages.bind(null, rootFolder, currentFile, $))\n\n        .then(svgToImg.bind(null, rootFolder, currentFile, $))\n        .then(svgToPng.bind(null, rootFolder, currentFile, $))\n        .then(inlinePng.bind(null, rootFolder, currentFile, $));\n    };\n}\n\nmodule.exports = inlineAssets;\n"]}