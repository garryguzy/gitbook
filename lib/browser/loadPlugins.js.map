{"version":3,"sources":["../../src/browser/loadPlugins.js"],"names":["path","require","timing","loadPlugins","plugins","type","measure","valueSeq","filter","plugin","getPackage","has","map","browserFile","resolve","getPath","get","toArray","module","exports"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,IAAMC,SAASD,QAAQ,iBAAR,CAAf;;AAEA;;;;;;;AAOA,SAASE,WAAT,CAAqBC,OAArB,EAA8BC,IAA9B,EAAoC;AAChC,WAAOH,OAAOI,OAAP,CACH,qBADG,EAEH,YAAM;AACF,eAAOF,QACFG,QADE,GAEFC,MAFE,CAEK;AAAA,mBAAUC,OAAOC,UAAP,GAAoBC,GAApB,CAAwBN,IAAxB,CAAV;AAAA,SAFL,EAGFO,GAHE,CAGE,UAACH,MAAD,EAAY;AACb,gBAAMI,cAAcb,KAAKc,OAAL,CAChBL,OAAOM,OAAP,EADgB,EAEhBN,OAAOC,UAAP,GAAoBM,GAApB,CAAwBX,IAAxB,CAFgB,CAApB;;AAKA,mBAAOJ,QAAQY,WAAR,CAAP;AACH,SAVE,EAWFI,OAXE,EAAP;AAYH,KAfE,CAAP;AAiBH;;AAEDC,OAAOC,OAAP,GAAiBhB,WAAjB","file":"loadPlugins.js","sourcesContent":["const path = require('path');\nconst timing = require('../utils/timing');\n\n/**\n * Load all browser plugins.\n *\n * @param  {OrderedMap<Plugin>} plugins\n * @param  {String} type ('browser', 'ebook')\n * @return {Array}\n */\nfunction loadPlugins(plugins, type) {\n    return timing.measure(\n        'browser.loadPlugins',\n        () => {\n            return plugins\n                .valueSeq()\n                .filter(plugin => plugin.getPackage().has(type))\n                .map((plugin) => {\n                    const browserFile = path.resolve(\n                        plugin.getPath(),\n                        plugin.getPackage().get(type)\n                    );\n\n                    return require(browserFile);\n                })\n                .toArray();\n        }\n    );\n}\n\nmodule.exports = loadPlugins;\n"]}