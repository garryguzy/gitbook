{"version":3,"sources":["../../src/plugins/sortDependencies.js"],"names":["Immutable","require","THEME_PREFIX","TYPE_PLUGIN","TYPE_THEME","pluginType","plugin","name","getName","indexOf","sortDependencies","plugins","byTypes","groupBy","get","List","concat","module","exports"],"mappings":";;AAAA,IAAMA,YAAYC,QAAQ,WAAR,CAAlB;;AAEA,IAAMC,eAAeD,QAAQ,0BAAR,CAArB;;AAEA,IAAME,cAAc,QAApB;AACA,IAAMC,aAAc,OAApB;;AAGA;;;;;AAKA,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AACxB,MAAMC,OAAOD,OAAOE,OAAP,EAAb;AACA,SAAQD,QAAQA,KAAKE,OAAL,CAAaP,YAAb,MAA+B,CAAxC,GAA6CE,UAA7C,GAA0DD,WAAjE;AACH;;AAGD;;;;;;;AAOA,SAASO,gBAAT,CAA0BC,OAA1B,EAAmC;AAC/B,MAAMC,UAAUD,QAAQE,OAAR,CAAgBR,UAAhB,CAAhB;;AAEA,SAAOO,QAAQE,GAAR,CAAYX,WAAZ,EAAyBH,UAAUe,IAAV,EAAzB,EACFC,MADE,CACKJ,QAAQE,GAAR,CAAYV,UAAZ,EAAwBJ,UAAUe,IAAV,EAAxB,CADL,CAAP;AAEH;;AAEDE,OAAOC,OAAP,GAAiBR,gBAAjB","file":"sortDependencies.js","sourcesContent":["const Immutable = require('immutable');\n\nconst THEME_PREFIX = require('../constants/themePrefix');\n\nconst TYPE_PLUGIN = 'plugin';\nconst TYPE_THEME  = 'theme';\n\n\n/**\n * Returns the type of a plugin given its name\n * @param {Plugin} plugin\n * @return {String}\n */\nfunction pluginType(plugin) {\n    const name = plugin.getName();\n    return (name && name.indexOf(THEME_PREFIX) === 0) ? TYPE_THEME : TYPE_PLUGIN;\n}\n\n\n/**\n * Sort the list of dependencies to match list in book.json\n * The themes should always be loaded after the plugins\n *\n * @param {List<PluginDependency>} deps\n * @return {List<PluginDependency>}\n */\nfunction sortDependencies(plugins) {\n    const byTypes = plugins.groupBy(pluginType);\n\n    return byTypes.get(TYPE_PLUGIN, Immutable.List())\n        .concat(byTypes.get(TYPE_THEME, Immutable.List()));\n}\n\nmodule.exports = sortDependencies;\n"]}