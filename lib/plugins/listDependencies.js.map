{"version":3,"sources":["../../src/plugins/listDependencies.js"],"names":["DEFAULT_PLUGINS","require","sortDependencies","listDependencies","deps","toRemove","filter","plugin","isEnabled","map","getName","concat","filterNot","includes","module","exports"],"mappings":";;AAAA,IAAMA,kBAAkBC,QAAQ,6BAAR,CAAxB;AACA,IAAMC,mBAAmBD,QAAQ,oBAAR,CAAzB;;AAEA;;;;;;;AAOA,SAASE,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B;AACA,QAAMC,WAAWD,KACZE,MADY,CACL,UAACC,MAAD,EAAY;AAChB,eAAO,CAACA,OAAOC,SAAP,EAAR;AACH,KAHY,EAIZC,GAJY,CAIR,UAACF,MAAD,EAAY;AACb,eAAOA,OAAOG,OAAP,EAAP;AACH,KANY,CAAjB;;AAQA;AACAN,WAAOA,KAAKO,MAAL,CAAYX,eAAZ,CAAP;;AAEA;AACAI,WAAOA,KAAKQ,SAAL,CAAe,UAACL,MAAD,EAAY;AAC9B,eAAOF,SAASQ,QAAT,CAAkBN,OAAOG,OAAP,EAAlB,CAAP;AACH,KAFM,CAAP;;AAIA;AACA,WAAOR,iBAAiBE,IAAjB,CAAP;AACH;;AAEDU,OAAOC,OAAP,GAAiBZ,gBAAjB","file":"listDependencies.js","sourcesContent":["const DEFAULT_PLUGINS = require('../constants/defaultPlugins');\nconst sortDependencies = require('./sortDependencies');\n\n/**\n * List all dependencies for a book, including default plugins.\n * It returns a concat with default plugins and remove disabled ones.\n *\n * @param {List<PluginDependency>} deps\n * @return {List<PluginDependency>}\n */\nfunction listDependencies(deps) {\n    // Extract list of plugins to disable (starting with -)\n    const toRemove = deps\n        .filter((plugin) => {\n            return !plugin.isEnabled();\n        })\n        .map((plugin) => {\n            return plugin.getName();\n        });\n\n    // Concat with default plugins\n    deps = deps.concat(DEFAULT_PLUGINS);\n\n    // Remove plugins\n    deps = deps.filterNot((plugin) => {\n        return toRemove.includes(plugin.getName());\n    });\n\n    // Sort\n    return sortDependencies(deps);\n}\n\nmodule.exports = listDependencies;\n"]}