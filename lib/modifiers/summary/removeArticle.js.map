{"version":3,"sources":["../../../src/modifiers/summary/removeArticle.js"],"names":["is","require","mergeAtLevel","indexArticleLevels","removeArticle","summary","level","string","getLevel","parent","getParent","articles","getArticles","index","findIndex","art","remove","set","module","exports"],"mappings":";;AAAA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,eAAeD,QAAQ,gBAAR,CAArB;AACA,IAAME,qBAAqBF,QAAQ,sBAAR,CAA3B;;AAEA;;;;;;;AAOA,SAASG,aAAT,CAAuBC,OAAvB,EAAgCC,KAAhC,EAAuC;AACnC;AACAA,YAAQN,GAAGO,MAAH,CAAUD,KAAV,IAAmBA,KAAnB,GAA2BA,MAAME,QAAN,EAAnC;;AAEA,QAAIC,SAASJ,QAAQK,SAAR,CAAkBJ,KAAlB,CAAb;;AAEA,QAAIK,WAAWF,OAAOG,WAAP,EAAf;AACA;AACA,QAAMC,QAAQF,SAASG,SAAT,CAAmB,UAACC,GAAD,EAAS;AACtC,eAAOA,IAAIP,QAAJ,OAAmBF,KAA1B;AACH,KAFa,CAAd;AAGA,QAAIO,UAAU,CAAC,CAAf,EAAkB;AACd,eAAOR,OAAP;AACH;;AAED;AACAM,eAAWA,SAASK,MAAT,CAAgBH,KAAhB,CAAX;AACAJ,aAASA,OAAOQ,GAAP,CAAW,UAAX,EAAuBN,QAAvB,CAAT;;AAEA;AACAF,aAASN,mBAAmBM,MAAnB,CAAT;;AAEA,WAAOP,aAAaG,OAAb,EAAsBI,OAAOD,QAAP,EAAtB,EAAyCC,MAAzC,CAAP;AACH;;AAEDS,OAAOC,OAAP,GAAiBf,aAAjB","file":"removeArticle.js","sourcesContent":["const is = require('is');\nconst mergeAtLevel = require('./mergeAtLevel');\nconst indexArticleLevels = require('./indexArticleLevels');\n\n/**\n    Remove an article from a level.\n\n    @param {Summary} summary\n    @param {String|SummaryArticle} level: level to remove\n    @return {Summary}\n*/\nfunction removeArticle(summary, level) {\n    // Coerce to level\n    level = is.string(level) ? level : level.getLevel();\n\n    let parent = summary.getParent(level);\n\n    let articles = parent.getArticles();\n    // Find the index to remove\n    const index = articles.findIndex((art) => {\n        return art.getLevel() === level;\n    });\n    if (index === -1) {\n        return summary;\n    }\n\n    // Remove from children\n    articles = articles.remove(index);\n    parent = parent.set('articles', articles);\n\n    // Reindex the level from here\n    parent = indexArticleLevels(parent);\n\n    return mergeAtLevel(summary, parent.getLevel(), parent);\n}\n\nmodule.exports = removeArticle;\n"]}