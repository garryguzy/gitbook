{"version":3,"sources":["../../../src/modifiers/config/addPlugin.js"],"names":["PluginDependency","require","togglePlugin","isDefaultPlugin","addPlugin","config","pluginName","version","deps","getPluginDependencies","dep","create","push","setPluginDependencies","module","exports"],"mappings":";;AAAA,IAAMA,mBAAmBC,QAAQ,+BAAR,CAAzB;AACA,IAAMC,eAAeD,QAAQ,gBAAR,CAArB;AACA,IAAME,kBAAkBF,QAAQ,mBAAR,CAAxB;;AAEA;;;;;;;AAOA,SAASG,SAAT,CAAmBC,MAAnB,EAA2BC,UAA3B,EAAuCC,OAAvC,EAAgD;AAC5C;AACA,QAAIJ,gBAAgBG,UAAhB,EAA4BC,OAA5B,CAAJ,EAA0C;AACtC,eAAOL,aAAaG,MAAb,EAAqBC,UAArB,EAAiC,IAAjC,CAAP;AACH;;AAED,QAAIE,OAAOH,OAAOI,qBAAP,EAAX;AACA,QAAMC,MAAMV,iBAAiBW,MAAjB,CAAwBL,UAAxB,EAAoCC,OAApC,CAAZ;;AAEAC,WAAOA,KAAKI,IAAL,CAAUF,GAAV,CAAP;AACA,WAAOL,OAAOQ,qBAAP,CAA6BL,IAA7B,CAAP;AACH;;AAEDM,OAAOC,OAAP,GAAiBX,SAAjB","file":"addPlugin.js","sourcesContent":["const PluginDependency = require('../../models/pluginDependency');\nconst togglePlugin = require('./togglePlugin');\nconst isDefaultPlugin = require('./isDefaultPlugin');\n\n/**\n * Add a plugin to a book's configuration\n * @param {Config} config\n * @param {String} pluginName\n * @param {String} version (optional)\n * @return {Config}\n */\nfunction addPlugin(config, pluginName, version) {\n    // For default plugin, we only ensure it is enabled\n    if (isDefaultPlugin(pluginName, version)) {\n        return togglePlugin(config, pluginName, true);\n    }\n\n    let deps = config.getPluginDependencies();\n    const dep = PluginDependency.create(pluginName, version);\n\n    deps = deps.push(dep);\n    return config.setPluginDependencies(deps);\n}\n\nmodule.exports = addPlugin;\n"]}