{"version":3,"sources":["../../src/cli/build.js"],"names":["Parse","require","Output","timing","options","getBook","getOutputFolder","module","exports","name","description","log","format","exec","args","kwargs","book","outputFolder","Generator","getGenerator","parseBook","then","resultBook","generate","root","fin","dump","getLogger"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,UAAR,CAAd;AACA,IAAMC,SAASD,QAAQ,WAAR,CAAf;AACA,IAAME,SAASF,QAAQ,iBAAR,CAAf;;AAEA,IAAMG,UAAUH,QAAQ,WAAR,CAAhB;AACA,IAAMI,UAAUJ,QAAQ,WAAR,CAAhB;AACA,IAAMK,kBAAkBL,QAAQ,mBAAR,CAAxB;;AAGAM,OAAOC,OAAP,GAAiB;AACbC,UAAM,uBADO;AAEbC,iBAAa,cAFA;AAGbN,aAAS,CACLA,QAAQO,GADH,EAELP,QAAQQ,MAFH,EAGLR,QAAQD,MAHH,CAHI;AAQbU,QARa,gBAQRC,IARQ,EAQFC,MARE,EAQM;AACf,YAAMC,OAAOX,QAAQS,IAAR,EAAcC,MAAd,CAAb;AACA,YAAME,eAAeX,gBAAgBQ,IAAhB,CAArB;;AAEA,YAAMI,YAAYhB,OAAOiB,YAAP,CAAoBJ,OAAOH,MAA3B,CAAlB;;AAEA,eAAOZ,MAAMoB,SAAN,CAAgBJ,IAAhB,EACNK,IADM,CACD,UAACC,UAAD,EAAgB;AAClB,mBAAOpB,OAAOqB,QAAP,CAAgBL,SAAhB,EAA2BI,UAA3B,EAAuC;AAC1CE,sBAAMP;AADoC,aAAvC,CAAP;AAGH,SALM,EAMNQ,GANM,CAMF,YAAM;AACP,gBAAIV,OAAOZ,MAAX,EAAmBA,OAAOuB,IAAP,CAAYV,KAAKW,SAAL,EAAZ;AACtB,SARM,CAAP;AASH;AAvBY,CAAjB","file":"build.js","sourcesContent":["const Parse = require('../parse');\nconst Output = require('../output');\nconst timing = require('../utils/timing');\n\nconst options = require('./options');\nconst getBook = require('./getBook');\nconst getOutputFolder = require('./getOutputFolder');\n\n\nmodule.exports = {\n    name: 'build [book] [output]',\n    description: 'build a book',\n    options: [\n        options.log,\n        options.format,\n        options.timing\n    ],\n    exec(args, kwargs) {\n        const book = getBook(args, kwargs);\n        const outputFolder = getOutputFolder(args);\n\n        const Generator = Output.getGenerator(kwargs.format);\n\n        return Parse.parseBook(book)\n        .then((resultBook) => {\n            return Output.generate(Generator, resultBook, {\n                root: outputFolder\n            });\n        })\n        .fin(() => {\n            if (kwargs.timing) timing.dump(book.getLogger());\n        });\n    }\n};\n"]}